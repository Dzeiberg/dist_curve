---

title: Transforms

keywords: fastai
sidebar: home_sidebar

summary: "Functions to apply class-prior-preserving univariate transforms to data "
description: "Functions to apply class-prior-preserving univariate transforms to data "
nb_path: "04_Univariate_Transforms.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 04_Univariate_Transforms.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="prepFeatures" class="doc_header"><code>prepFeatures</code><a href="https://github.com/Dzeiberg/dist_curve/tree/master/dist_curve/transforms.py#L17" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>prepFeatures</code>(<strong><code>X</code></strong>)</p>
</blockquote>
<p>Apply z-score normalization to nxd feature matrix</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="trainOOBClassifier" class="doc_header"><code>trainOOBClassifier</code><a href="https://github.com/Dzeiberg/dist_curve/tree/master/dist_curve/transforms.py#L24" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>trainOOBClassifier</code>(<strong><code>X</code></strong>, <strong><code>y</code></strong>, <strong><code>modelFactory</code></strong>=<em><code>'&lt;lambda&gt;'</code></em>, <strong><code>n_estimators</code></strong>=<em><code>100</code></em>, <strong><code>n_jobs</code></strong>=<em><code>10</code></em>)</p>
</blockquote>
<p>Train ensemble of <n_estimators> models predicting the probability that each
instance came from the labeled positive, rather than the unlabeled mixture, set.</p>
<p>Required Arguments:</p>

<pre><code>- X : ndarray shape (n,d) : feature matrix
- y : ndarray shape (n,)  : positive v. unlabeled component assignments for each instance
</code></pre>
<p>Optional Arguments:</p>

<pre><code>- modelFactory : lambda function returning sklearn-style model instance (has fit, fit_predict, predict_proba, ... functions) : default DicisionTreeRegressor
- n_estimators : size of the ensemble : default 100

</code></pre>
<p>Returns</p>

<pre><code>- transform_scores : ndarray (n,) : probability that each instance came from labeled positive set, calculating using out-of-bag scores
- auc_pu : float : the AUROC of this non-traditional classifier</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="trainKFoldClassifier" class="doc_header"><code>trainKFoldClassifier</code><a href="https://github.com/Dzeiberg/dist_curve/tree/master/dist_curve/transforms.py#L50" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>trainKFoldClassifier</code>(<strong><code>X</code></strong>, <strong><code>y</code></strong>, <strong><code>modelFactory</code></strong>=<em><code>'&lt;lambda&gt;'</code></em>, <strong><code>KFoldValue</code></strong>=<em><code>10</code></em>)</p>
</blockquote>
<p>Train model using K-fold cross-validation
Required Arguments:</p>

<pre><code>- X : ndarray shape (n,d) : feature matrix
- y : ndarray shape (n,)  : positive v. unlabeled component assignments for each instance
</code></pre>
<p>Optional Arguments:</p>

<pre><code>- modelFactory : lambda function returning sklearn-style model instance (has fit, fit_predict, predict_proba, ... functions) : default SVC
- KFoldValue : number of folds to use in k-fold cross-validation : default 10

</code></pre>
<p>Returns</p>

<pre><code>- transform_scores : ndarray (n,) : probability that each instance came from labeled positive set
- auc_pu : float : the AUROC of this non-traditional classifier</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Test k-fold and oob transform functions</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="getOptimalTransform" class="doc_header"><code>getOptimalTransform</code><a href="https://github.com/Dzeiberg/dist_curve/tree/master/dist_curve/transforms.py#L79" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>getOptimalTransform</code>(<strong><code>X</code></strong>, <strong><code>y</code></strong>)</p>
</blockquote>
<p>Train the 6 univariate transforms from (Zeiberg 2020) and return the transform scores and auc_pu for the best transform</p>
<p>Required Arguments:</p>

<pre><code>- X : ndarray shape (n,d) : feature matrix
- y : ndarray shape (n,)  : positive v. unlabeled component assignments for each instance
</code></pre>
<p>Returns:</p>

<pre><code>- transform_scores : ndarray (n,) : probability that each instance came from labeled positive set
- auc_pu : float : the AUROC of this non-traditional classifier</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

